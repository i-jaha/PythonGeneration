"""
Угадайка чисел
Описание проекта:
программа генерирует случайное число в диапазоне от 1 до 100
и просит пользователя угадать это число.
Если догадка пользователя больше случайного числа,
то программа должна вывести сообщение 'Слишком много, попробуйте еще раз'.
Если догадка меньше случайного числа,
то программа должна вывести сообщение 'Слишком мало, попробуйте еще раз'.
Если пользователь угадывает число,
то программа должна поздравить его и вывести сообщение 'Вы угадали, поздравляем!'.

Составляющие проекта:
    - Целые числа (тип int);
    - Переменные;
    - Ввод / вывод данных (функции input() и print());
    - Условный оператор (if/elif/else);
    - Цикл while;
    - Бесконечный цикл;
    - Операторы break, continue;
    - Работа с модулем random для генерации случайных чисел.

Заголовок программы
Подключите модуль random;
Сгенерируйте случайное число от 1 до 100;
Выведите текст приветствия пользователю: 'Добро пожаловать в числовую угадайку'.

Функция проверки корректности введенных данных
Пользователь потенциально может ввести неверные данные,
например, не число, или число превышающее 100.
Важно предусмотреть такую возможность, чтобы программа продолжала правильно работать.
Обработка такого рода ситуаций называется защитой от дурака.
Напишите функцию is_valid() в которую передается один строковый аргумент.
Функция возвращает значение True,
если переданный аргумент является целым числом от 1 до 100,
и False в противном случае.

Основной цикл программы
Организуйте цикл, который будет запрашивать у пользователя данные
(цикл может быть бесконечным (while True)
или может использовать сигнальную метку с последующим переключением, после угадывания числа);
Запросите у пользователя число от 1 до 100;
Проверьте введенные данные с помощью функции is_valid():
если данные некорректны, выведите текст: 'А может быть все-таки введем целое число от 1 до 100?' и перейдите к следующей итерации основного цикла;
если данные корректны, преобразуйте их к целому числу для удобства дальнейшей работы.

Сравнение введенного числа с загаданным
Организуйте сравнение введенного числа с загаданным числом:
Если введенное число меньше загаданного числа,
выведите текст: 'Ваше число меньше загаданного, попробуйте еще разок';
Если введенное число больше загаданного числа,
выведите текст: 'Ваше число больше загаданного, попробуйте еще разок';
Если введенное число равно загаданному числу,
выведите текст: 'Вы угадали, поздравляем!'.
Выведите прощальное сообщение пользователю:
'Спасибо, что играли в числовую угадайку. Еще увидимся...'.

Улучшения проекта
Добавьте подсчет попыток, сделанных пользователем.
Когда число отгадано, программа должна показать количество попыток;
Добавьте возможность генерации нового числа (повторная игра), после того,
как пользователь угадал число;
Добавить возможность указания правой границы для случайного выбора числа (от 1 до n).
"""

import random


def is_valid(s, max_num):
    try:
        num = int(s)
        return 1 <= num <= max_num
    except ValueError:
        return False


print("Добро пожаловать в числовую угадайку")

while True:
    max_number = int(input("Введите правую границу для загадывания числа: "))
    print(f"Я загадал число от 1 до {max_number}. Попробуйте его угадать!")

    random_number = random.randint(1, max_number)
    attempts = 0

    while True:
        user_input = input("Введите ваше число: ")

        if not is_valid(user_input, max_number):
            print(f"А может быть все-таки введем целое число от 1 до {max_number}?")
            continue

        user_guess = int(user_input)
        attempts += 1

        if user_guess < random_number:
            print("Ваше число меньше загаданного, попробуйте еще разок")
        elif user_guess > random_number:
            print("Ваше число больше загаданного, попробуйте еще разок")
        else:
            print(f"Вы угадали, поздравляем! Количество попыток: {attempts}")
            break

    play_again = input("Хотите сыграть еще раз? (y/n): ")
    if play_again.lower() != "y":
        break

print("Спасибо, что играли в числовую угадайку. Еще увидимся...")

'''
Шифр Цезаря
Шифр Цезаря (шифр сдвига) — один из самых простых и наиболее широко известных методов шифрования. 
Шифр Цезаря — это вид шифра подстановки, в котором каждый символ в открытом тексте заменяется символом, 
находящимся на некотором постоянном числе позиций левее или правее него в алфавите.
Шифр подстановки — метод шифрования с заменой элементов исходного открытого текста другими, 
в соответствии с неким правилом.
Например, в шифре со сдвигом вправо на 3 позиции символ A заменяется символом D, 
символ B — символом E, и так далее, до символа Z, заменяемого символом C.
Шифр назван в честь римского полководца Гая Юлия Цезаря, 
использовавшего его для секретной переписки со своими генералами.

Математическая модель
Если сопоставить каждый символ алфавита с его порядковым номером (нумеруя с 0), 
то шифрование и дешифрование можно выразить формулами модульной арифметики:
    y = (x+k) mod n
    x = (y-k) mod n
где 
x — символ открытого текста, 
y — символ шифрованного текста, 
n — мощность алфавита (количество символов), а 
k — ключ.
Под операцией mod подразумевается операция нахождения остатка. 
В языке Python для нахождения остатка от деления двух чисел, мы используем оператор %.

Пример
Шифрование с использованием ключа k=3. 
Буква «Е» «сдвигается» на три буквы вперед и становится буквой «З». 
Твердый знак, перемещенный на три буквы вперед, становится буквой «Э», 
буква «Я», перемещенная на три буквы вперед, становится буквой «В», и так далее:
    Исходный алфавит: А Б В Г Д Е Ё Ж З И Й К Л М Н О П Р С Т У Ф Х Ц Ч Ш Щ Ъ Ы Ь Э Ю Я
    Шифрованный:      Г Д Е Ё Ж З И Й К Л М Н О П Р С Т У Ф Х Ц Ч Ш Щ Ъ Ы Ь Э Ю Я А Б В 
Оригинальный текст:
    Съешь же ещё этих мягких французских булок, да выпей чаю.
Шифрованный текст:
    Фэзыя йз зьи ахлш пвёнлш чугрщцкфнлш дцосн, жг еютзм ъгб.

Взлом шифра
Шифр Цезаря может быть легко взломан даже в случае, когда взломщик знает только зашифрованный текст. 
Можно рассмотреть две ситуации:
    Взломщик знает (или предполагает), что использовался простой шифр подстановки, но не знает, что это — схема Цезаря.
    Взломщик знает, что использовался шифр Цезаря, но не знает значение сдвига.
    
В первом случае шифр может быть взломан с применением метода частотного анализа. 
Используя этот метод, взломщик, вероятно, быстро заметит регулярность в решении и поймет, 
что используемый шифр — шифр Цезаря.
Во втором случае взлом шифра еще более прост. 
Существует не так много вариантов значений сдвига 
(25 для английского языка, 32 для русского языка), все они могут быть проверены перебором.

Примечания
Примечание 1. 
Используемое преобразование в шифре Цезаря обычно обозначают как ROT N, 
где N — сдвиг, ROT — сокращение от слова ROTATE, в данном случае «циклический сдвиг». 
Например, обозначение ROT 2 обозначает сдвиг на 2 позиции, 
то есть, «а» превращается в «в», «б» в «г», и так далее, и в конце «ю» превращается в «а» а «я» — в «б».
Примечание 2. 
Число разных преобразований зависит от длины алфавита:
для русского языка возможно 32 разных преобразования 
(преобразования ROT 0 и ROT 33 сохраняют исходный текст, а дальше начинаются уже повторения);
для английского языка возможны 25 разных преобразований 
(преобразования ROT 0 и ROT 26 сохраняют исходный текст, а дальше начинаются уже повторения).
Примечание 3. 
Неалфавитные символы — знаки препинания, пробелы, цифры — не меняются.
Примечание 4. 
Естественным развитием шифра Цезаря стал шифр Виженера.

Описание проекта: 
требуется написать программу, способную шифровать и дешифровать текст в соответствии с алгоритмом Цезаря. 
Она должна запрашивать у пользователя следующие данные:
    направление: шифрование или дешифрование;
    язык алфавита: русский или английский;
    шаг сдвига (со сдвигом вправо).
Примечание 1. 
Считайте, что в русском языке 32 буквы (буква ё отсутствует).
Примечание 2. 
Неалфавитные символы — знаки препинания, пробелы, цифры — не меняются.
Примечание 3. 
Сохраните регистр символов. 
Например, текст: "Умом Россию не понять" при сдвиге на одну позицию вправо 
будет преобразован в: "Фнпн Спттйя ож рпоауэ".

Составляющие проекта:
    Целые числа (тип int);
    Модульная арифметика;
    Переменные;
    Ввод / вывод данных (функции input() и print());
    Условный оператор (if/elif/else);
    Цикл for/while;
    Строковые методы.


'''

# Алфавиты
RUSSIAN_ALPHABET = 'АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ'  # 32 буквы без ё
ENGLISH_ALPHABET = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'

def caesar_cipher(text, shift, alphabet, decrypt=False):
    if decrypt:
        shift = -shift
    result = ''
    for char in text:
        if char.upper() in alphabet:
            pos = alphabet.index(char.upper())
            new_pos = (pos + shift) % len(alphabet)
            new_char = alphabet[new_pos]
            result += new_char.lower() if char.islower() else new_char
        else:
            result += char
    return result

# Основная программа
print("Программа шифрования Цезаря")
print("Выберите направление:")
print("1 - Шифрование")
print("2 - Дешифрование")
print("3 - Дешифрование без знания сдвига")
direction = int(input("Введите номер: "))

print("Выберите язык:")
print("1 - Русский")
print("2 - Английский")
language = int(input("Введите номер: "))

alphabet = RUSSIAN_ALPHABET if language == 1 else ENGLISH_ALPHABET

if direction == 3:
    text = input("Введите зашифрованный текст: ")
    print("Все возможные варианты дешифрования:")
    for shift in range(1, len(alphabet)):
        result = caesar_cipher(text, shift, alphabet, True)
        print(f"Сдвиг {shift:2d}: {result}")
else:
    shift = int(input("Введите шаг сдвига: "))
    text = input("Введите текст: ")
    result = caesar_cipher(text, shift, alphabet, direction == 2)
    print(f"Результат: {result}")